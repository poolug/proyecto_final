<h1>Mis Viviendas</h1>

<table class="table">
  <thead>
    <tr>
      <th>Administrador</th>
      <th>Nombre</th>
      <th>Miembros en la vivienda</th>
      <th>Estado</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @housings_actives.each do |housing| %>
      <tr>
        <td class="align-middle"><%= User.find(housing.user_id).name %></td>
        <td class="align-middle"><%= housing.name %></td>
        <td class="align-middle">
          <% housing.users.each_with_index do |user_id, index| %>
            <li> <%= "Usuario #{index + 1}: #{user_id.name} | #{user_id.email}" %> </li>
          <% end %>
          <div id="add-member-form-<%= housing.id %>" ></div>
          <span id="add-button"><%= link_to 'Agregar', add_member_path(housing.id), remote: true %></span>
        </td>
        <td class="align-middle">
          <% if housing.status == "Active" %>
            Activa
          <% end %>
        </td>
        <td class="align-middle"><%= link_to 'Editar', edit_housing_path(housing) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

  <%= link_to 'Crear vivienda', new_housing_path %>
<% if @housings_actives.count < 1 && Housing.where(user_id: current_user.id) %>
<% end %>
