<h1>Mis Viviendas</h1>

<table class="table">
  <thead>
    <tr>
      <th>Administrador</th>
      <th>Nombre</th>
      <th>Miembros en la vivienda</th>
      <th>Estado</th>
      <th colspan="3"></th>
    </tr>
  </thead>

  <tbody>
    <% @housings_actives.each do |housing| %>
      <tr>
        <td class="align-middle"><%= User.find(housing.user_id).name %></td>
        <td class="align-middle"><%= housing.name %></td>
        <td class="align-middle">
          <% housing.users.each_with_index do |user_id, index| %>
            <li> <%= "Usuario #{index + 1}: #{user_id.name} | #{user_id.email}" %> </li>
          <% end %>
          <div id="add-member-form-<%= housing.id %>" ></div>
          <li id="add-button"><%= link_to add_member_path(housing.id), remote: true do %>
            <svg xmlns="http://www.w3.org/2000/svg" class="icon icon-tabler icon-tabler-user-plus" width="40" height="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="#00b341" fill="none" stroke-linecap="round" stroke-linejoin="round">
            <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
            <circle cx="9" cy="7" r="4" />
            <path d="M3 21v-2a4 4 0 0 1 4 -4h4a4 4 0 0 1 4 4v2" />
            <path d="M16 11h6m-3 -3v6" />
            </svg>
            <% end %>
          </li>
        </td>
        <td class="align-middle">
          <% if housing.status == "Active" %>
            Activa
          <% end %>
        </td>
        <td class="align-middle"><%= link_to 'Editar', edit_housing_path(housing) %></td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

  <%= link_to 'Crear vivienda', new_housing_path %>
<% if @housings_actives.count < 1 && Housing.where(user_id: current_user.id) %>
<% end %>
